# Mii Data (Generation 2)

This is for Mii data that's used in 3DS, Wii U, and Nintendo Network.

## Data Structure

> NOTE: All values are in little-endian.  

| Offset | Value             | Length | Type         | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ------ | ----------------- | ------ | ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 0x0    | Unknown           | 0x1    | Byte         | Unknown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 0x1    | Unknown           | 0x1    | Byte         | Unknown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 0x2    | Unknown           | 0x1    | Byte         | Unknown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 0x3    | Mii Version       | 0x1    | Byte         | Mii's version, Nintendo Network returns `40`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 0x4    | Mii ID            | 0x4    | Byte Array   | Undocumented                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 0x8    | System ID         | 0x8    | Byte Array   | System ID of the owner of this Mii. This is likely the part that allows seedminer to be possible.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 0x14   | Unknown           | 0x2    | Short        | Unknown                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 0x16   | Unknown           | 0x2    | Short        | Unknown, seems to always be null. Probably padding.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 0x18   | Mii Metadata Bits | 0x2    | (Bits) Short | `Bit 15` - Unknown (seems to always be 0)<br/>`Bit 14` - Favourited<br/>`Bits 13-10` - 4 bits make up the Mii's favourite colour index (0-11)<br/>`Bits 9-5` - 5 bits make up the Mii's birth day (0-31)<br/>`Bits 4-1` - 4 bits make up the Mii's birth month (0-12)<br/>`Bit 0` - Gender (0 = Male, 1 = Female)                                                                                                                                                                                                                                                                                                                                                                                           |
| 0x1A   | Name              | 0x14   | String       | Mii's name, encoded in UTF-16LE.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 0x2E   | Height            | 0x1    | Byte         | Mii's height (default is `0x40`, range is `0x00`-`0x7F`).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 0x2F   | Weight            | 0x1    | Byte         | Mii's weight (default is `0x40`, range is `0x00`-`0x7F`).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 0x30   | Head Details      | 0x1    | (Bits) Byte  | Provides information about the Mii's skin and head.<br/>`Bits 7-5` - 3 bits make up the Mii's skin tone index<br/>`Bits 4-1` - 4 bits make up the Mii's head shape. See all shapes [here](#Head-Shapes).<br/>`Bit 0` - Is Mingling                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 0x31   | Face Details      | 0x1    | Nybbles      | Provides information about the Mii's face.<br/>`First Nybble` - Blush Type Index<br/>`Second Nybble` - Wrinkles Index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 0x32   | Hair Style        | 0x1    | Byte         | The Mii's hair style. See all styles [here](#Hair-Styles).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 0x33   | Hair Data         | 0x1    | (Bits) Byte  | Provides information about the Mii's hair.<br/>`Bits 7-4` - Unused<br/>`Bit 3` - Is Hair Flipped<br/>`Bits 2-0` - Hair colour index. See all colours [here](#Hair-Colours).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 0x34   | Eye Data          | 0x4    | (Bits) Int   | The Mii's eye style.<br/>`Bits 31-30` - Unused<br/>`Bits 29-25` - Eye Height (higher values means lower positioning) [max: 18]<br/>`Bits 24-20` - Eye Spacing (higher values means larger spacing) [max: 12]<br/>`Bits 19-16` - Eye Rotation (higher values means more counter-clockwise) [max: 7]<br/>`Bits 15-13` - Eye Stretch (higher values means more stretched) [max: 6]<br/>`Bit 12` - Unused<br/>`Bits 11-9` - Eye Size (higher values means bigger size) [max: 7]<br/>`Bits 8-6` - Eye Colour Index. See all colours [here](#Eye-Colours).<br/>`Bits 5-0` - Eye type index. List is not finished yet.                                                                                             |
| 0x38   | Eyebrow Data      | 0x4    | (Bits) Int   | The Mii's eyebrow style.<br/>`Bits 31-30` - Unused<br/>`Bits 29-25` - Eyebrow Height (higher values means lower positioning) [min: 3, max: 18]<br/>`Bits 24-21` - Eyebrow Spacing (higher values means larger spacing) [max: 12]<br/>`Bits 20-16` - Eyebrow Rotation (higher values means more counter-clockwise) [max: 11]<br/>`Bit 15` - Unused<br/>`Bits 14-12` - Eyebrow Stretch (higher values means more stretched) [max: 6]<br/>`Bits 11-8` - Eyebrow Size (higher values means bigger size) [max: 8]<br/>`Bits 7-5` - Eyebrow Colour Index. See all colours [here](#Hair-Colours).<br/>`Bits 4-0` - Eyebrow type index. List is not complete yet, but here's what I have [so far](#Eyebrow-Styles). |
| 0x3C   | Nose Data         | 0x2    | (Bits) Short | The Mii's nose style.<br/>`Bits 15-14` - Unused<br/>`Bits 13-9` - Nose Height<br/>`Bits 8-5` - Nose Size<br/>`Bits 4-0` - Nose type index. List is not finished yet.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 0x3E   | Mouth Data        | 0x2    | (Bits) Short | The Mii's mouth style. WIP.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 0x40   | Mustache Data     | 0x2    | (Bits) Short | The Mii's mustache style. WIP.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 0x42   | Beard Data        | 0x2    | (Bits) Short | The Mii's beard style. WIP.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 0x44   | Glasses Data      | 0x2    | (Bits) Short | The Mii's glasses style. WIP.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 0x46   | Mole Data         | 0x2    | (Bits) Short | The Mii's mole style. WIP.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 0x48   | Author Name       | 0x14   | String       | Mii Creator's name, encoded in UTF-16LE.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 0x5C   | Padding           | 0x2    | Short        | Always null.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 0x5E   | CRC Checksum      | 0x2    | Short        | CRC-16 checksum of the previous 0x5E bytes. More specifically, it is using `CRC-16/XMODEM`.<br/>The lookup table can be found [here](https://github.com/digidotcom/DCRabbit_10/blob/master/Lib/Rabbit4000/Math/crc16.lib#L44).                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

# Head Shapes

![Head Shapes](./images/headShapes.png)

# Hair Styles

![Hair Styles](./images/hairStyles.png)

# Hair Colours

![Hair Colours](./images/hairColour.png)

# Eye Colours

![Eye Colours](./images/eyeColour.png)

# (WIP.) Eyebrow Styles

![Eyebrow Styles](./images/eyebrowStyles.png)
